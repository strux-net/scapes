# Autogenerated makefile
# by :
#   m_tru mTR >makefile
#
m_diff=bash -c 'if ! diff -a -q $$1 ok/$$1 >/dev/null ; then echo -e "BAD\t$$1\tok/$$1" ; else echo -e "GOOD\t$$1" ; fi ; ' m_diff
m_copy=bash -c 'if ! diff -a -q $$1 $$2    >/dev/null ; then echo copying $$1 $$2; cp -p $$1 $$2 ; fi ; ' m_copy
ALL:\
  acmd\

install install_ALL:\
  install_acmd\

test test_ALL:\
  test_acmd\

logged_build:
	-@${MAKE} --no-print-directory test_ALL 2>&1 | perl -pe 's,$$ENV{HOME}/,~/,g' >m.log # substitute /home/username with ~  (to avoid test-fails for trivial reasons)
	@${m_diff} m.log
confirmed_install: confirm install
confirm:
	@bash -c 'read -p "really install ? (^C) if not"'
export Title=execute commands depending on filename
install_acmd:
	@echo  installing acmd
	@${m_copy} acmd ok/acmd
	@${m_copy} docs/README.html ok/docs/README.html
	@${m_copy} acmd ~/strux/bin/acmd
test_acmd: acmd
	@echo  testing acmd
	echo  "0" | ./acmd            -V /MostLikelyNotADir/a ; echo
	echo  "0" | ./acmd -a LL.acmd -V /MostLikelyNotADir/a ; echo
	echo  "1" | ./acmd -l LL.acmd -V /MostLikelyNotADir/a ; echo
	echo  "2" | ./acmd -f LL.acmd -V /MostLikelyNotADir/a ; echo
	echo "-2" | ./acmd -a LL.acmd    /MostLikelyNotADir/a ; echo
	echo  "3" | ./acmd -f LL.acmd -V /MostLikelyNotADir/a ; echo
	echo  "4" | ./acmd -f LL.acmd -V /MostLikelyNotADir/a ; echo
	echo  "9" | ./acmd -a LL.acmd    /MostLikelyNotADir/a ; echo
	./acmd /MostLikelyNotAFile
	-./acmd -invalid
.PHONY: acmd
acmd:
	@echo  building acmd
	perl_tru acmd.plTR >acmd
	@${m_diff} acmd
	chmod +x acmd
	html_tru docs/README.txtTR >docs/README.html
	@${m_diff} docs/README.html

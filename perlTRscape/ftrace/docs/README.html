<!DOCTYPE html><html>
<!--
  Autogenerated from html_tru using STDIN
  do not edit this file, look for above mentioned and make your changes there.
  or you may loose all your changes and probably choose the wrong method.
-->
<head>
  <meta name="generator" content="html_tru (www.strux.net)"/>
  <title>trace a process (and it's childs) and produces a tree-view summary.</title>
</head>
<body>
<a id="ftrace"></a>
<h1>ftrace</h1>
<div>
<a id="trace20a20process2028and20it27s20childs2920and20produces20a20tree2dview20summary2e"></a>
<h2>trace a process (and it's childs) and produces a tree-view summary.</h2>
<div>
<br/><table class="statements">
<tr class="coderow">
  <td class="code"><kbd>usage : ftrace [options] [ -- strace-options ] [ command [ args ] ]</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd></kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>trace a process (and it's childs) and produces a tree-view summary.</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd></kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>Example :</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;ftrace -p 33445</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;ftrace apt-get install whatever</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>If the command contains options you need to stop the option-parsing of ftrace</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;ftrace -- rsync -a /this /there</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>For -p to work you need</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;either</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;echo 0 &gt; /proc/sys/kernel/yama/ptrace_scope</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;or</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;vi /etc/sysctl.d/10-ptrace.conf</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>Notes : </kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;ftrace does not trace suid-programs (unless you are root).</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;Even a (at first glance) harmless ping is such a candidate.</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;consider this when tracing scripts.</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;when attaching to a running process (with -p) there is a small time-window, where ftrace may get confused.</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;ftrace has to figure out what the current cwd of the process to be attached is.</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;then ftrace attaches to this process.</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;If between these two steps the cwd of the process changes, then some (or all) paths may be wrong.</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;You can interrupt ftrace any time. The traced Process will continue running unchanged and the gathered information will be output.</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;You will most likely never need to set strace-options.</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;ftrace will provide the needed options automatically</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;It can also parse exiting trace-files</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;the trace file should be produced with</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strace -q -f -ttt -o strace.out -- yourCommandHere</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;run ftrace</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ftrace -f strace.out </kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;The strux-tools contain a syntax-file for viewing the tree with vim.</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;in a vim-buffer with the output of ftrace do</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set ft=ftrace</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>Bugs : </kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;Probably some</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>OPTIONS:</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-p:&lt;pid&gt;	a pid to trace</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-fno	file names only</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-q	quiet (don't print header)</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-s	give information about bytes written to stdout and stderr</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-v	verbose (tell the flags used for file actions)</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-i:&lt;regexp&gt;	do not report files matching the given regexp</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default for &lt;regexp&gt; is /dev/</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-f:&lt;file&gt;	do not trace anything but parse an existing strace-file</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-fd:&lt;dir&gt;	for -f tell in what dir the trace was created</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default for &lt;dir&gt; is /unknown/</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-oa:&lt;file&gt;	append output to the given file</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-o:&lt;file&gt;	write output to the given file</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-Pp	preprend the pid in the output</kbd></td>
</tr>
<tr class="coderow">
  <td class="code"><kbd>&nbsp;&nbsp;-version	show version information</kbd></td>
</tr>
</table><br/>
</div>
</div>
</body>
</html>
